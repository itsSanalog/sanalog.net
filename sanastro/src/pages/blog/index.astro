---
import { getCollection } from "astro:content";
import { Image } from "astro:assets";
import BlogLayout from "../../layouts/BlogLayout.astro";
import Collapsible from "../../components/blog/Collapsible.astro";

const codeEntries = await getCollection("blog", ({ id }) => {
  return id.startsWith("code/");
});
const makeEntries = await getCollection("blog", ({ id }) => {
  return id.startsWith("work/");
})
const talkEntries = await getCollection("blog", ({ id }) => {
  return id.startsWith("talk/");
})
---
<BlogLayout title="sanaBlog">
  <p class="muted">Featured</p>
  <a href="[LINK HERE]" class="plain">
    <h2>TITLE HERE</h2>
    <div class="muted small pb font-ui">
      <time datetime="2024-02-20T00:00:00+00:00">February 20, 2024</time> · <span class="reading-time" title="Estimated read time">2 minute read</span>
    </div>
    <div class="small muted">
      lorem ipsum... Keep&nbsp;reading&nbsp;→
    </div>  
  </a>

  <hr class="mn2 ms2">

  <Collapsible name="code( );">
    {
      codeEntries.map((entry) => ( //doc: https://docs.astro.build/en/guides/content-collections/#using-content-in-astro-templates
      <a href={ `/blog/${ entry.slug }` } class="plain">
        <Image src={ entry.data.cover } alt={ entry.data.coverAlt } />
        {/* use 'entry.data.cover.src' as src if using native <img> tag */}
        <h2>{ entry.data.title }</h2>
        <p>{ entry.data.description }</p>
      </a>
    ))
  }
  </Collapsible>
  <Collapsible name="work">
    {
      makeEntries.map((entry) => ( //doc: https://docs.astro.build/en/guides/content-collections/#using-content-in-astro-templates
      <a href={ `/blog/${ entry.slug }` } class="plain">
        <Image src={ entry.data.cover } alt={ entry.data.coverAlt } />
        {/* use 'entry.data.cover.src' as src if using native <img> tag */}
        <h2>{ entry.data.title }</h2>
        <p>{ entry.data.description }</p>
      </a>
    ))
  }
  </Collapsible>
  <Collapsible name="talk..">
    {
      talkEntries.map((entry) => ( //doc: https://docs.astro.build/en/guides/content-collections/#using-content-in-astro-templates
      <a href={ `/blog/${ entry.slug }` } class="plain">
        <Image src={ entry.data.cover } alt={ entry.data.coverAlt } />
        {/* use 'entry.data.cover.src' as src if using native <img> tag */}
        <h2>{ entry.data.title }</h2>
        <p>{ entry.data.description }</p>
      </a>
    ))
  }
  </Collapsible>
  
  <hr class="mn2 ms2">

</BlogLayout>