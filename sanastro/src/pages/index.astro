---
import MainLayout from "../layouts/MainLayout.astro";
import Footer from "../components/Footer.astro";
---

<MainLayout title="sanalog.net">
  <h1 id="scroller0" class="home_scroller">0 — 3</h1>
  <h1 id="scroller1" class="home_scroller">1 — 3</h1>
  <h1 id="scroller2" class="home_scroller">2 — 3</h1>
  <h1 id="scroller3" class="home_scroller">3 — 3</h1>
  <div id="fullpage" class="home_fullpage">
    <div class="section">
      <!--  -->
    </div>
    <div class="section main_flex">
      <a href="about" class="home_link">WHO<br>I AM</a>
    </div>
    <div class="section main_flex">
      <a href="blog/main" class="home_link">WHAT<br>I DO</a>
    </div>
    <div class="section main_flex">
      <a href="contact" class="home_link">CONTACT</a>
      <Footer />
    </div>
  </div>

  <!-- FULLPAGE.JS -->
  <script slot="js" src="https://unpkg.com/fullpage.js@3.1.2/dist/fullpage.min.js"></script>
  <script slot="js">
    new fullpage('#fullpage', {
      scrollingSpeed: 700,
      verticalCentered: false,
      scrollBar: true
    });
  </script>
  
  <!-- SCROLLER -->
  <script slot="js">
    const scrollers = [
      { element: document.getElementById('scroller0'), showThreshold: 0 },
      { element: document.getElementById('scroller1'), showThreshold: 30 },
      { element: document.getElementById('scroller2'), showThreshold: 60 },
      { element: document.getElementById('scroller3'), showThreshold: 90 }
    ];
    
    function showHide(scrollPercentage) {
      scrollers.forEach(function (scroller) {
        if (scrollPercentage >= scroller.showThreshold && scrollPercentage < scroller.showThreshold + 30) {
          scroller.element.classList.remove('hidden');
        } else {
          scroller.element.classList.add('hidden');
        }
      });
    }
    
    showHide(0);
    
    window.addEventListener('scroll', function () {
      const scrollTop = document.documentElement.scrollTop;
      const scrollHeight = document.documentElement.scrollHeight;
      const clientHeight = document.documentElement.clientHeight || window.innerHeight;
      const scrollPercentage = (scrollTop / (scrollHeight - clientHeight)) * 100;
      
      console.log(scrollPercentage);
      showHide(scrollPercentage);
    });
  </script>
</MainLayout>